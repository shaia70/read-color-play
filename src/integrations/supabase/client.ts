
// This file is automatically generated. Do not edit it directly.
import { createClient } from '@supabase/supabase-js';
import type { Database } from './types';

console.log('=== SUPABASE CLIENT MODULE LOADING ===');

// Hardcoded values - these should always be available
const supabaseUrl = "https://pahqikhckqjujbhvqnyb.supabase.co";
const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBhaHFpa2hja3FqdWpiaHZxbnliIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwODkzNzMsImV4cCI6MjA2MzY2NTM3M30.zVNZAEFgwaVRPFHFYA-XN1kqcUeXl-24kj6fnsLQDH8";

console.log('Supabase URL:', supabaseUrl);
console.log('Supabase Key present:', !!supabaseKey);

// Store client instance
let _supabase: ReturnType<typeof createClient<Database>> | null = null;

// Function to get or create the client
export const getSupabaseClient = () => {
  console.log('=== Getting Supabase client ===');
  
  if (!_supabase) {
    console.log('=== Creating Supabase client ===');
    console.log('URL check:', supabaseUrl, 'length:', supabaseUrl?.length);
    console.log('Key check:', !!supabaseKey, 'length:', supabaseKey?.length);
    
    if (!supabaseUrl || supabaseUrl.trim() === '') {
      console.error('supabaseUrl is missing or empty:', supabaseUrl);
      throw new Error('supabaseUrl is required but not provided');
    }

    if (!supabaseKey || supabaseKey.trim() === '') {
      console.error('supabaseKey is missing or empty:', !!supabaseKey);
      throw new Error('supabaseKey is required but not provided');
    }

    try {
      _supabase = createClient<Database>(supabaseUrl, supabaseKey, {
        auth: {
          persistSession: true,
          autoRefreshToken: true,
        }
      });
      console.log('=== Supabase client created successfully ===');
    } catch (error) {
      console.error('Error creating Supabase client:', error);
      throw error;
    }
  }
  
  return _supabase;
};

// For backwards compatibility - export a function that returns the client
export const supabase = getSupabaseClient;

console.log('=== SUPABASE CLIENT MODULE LOADED ===');
